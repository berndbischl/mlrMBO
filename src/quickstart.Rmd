# Introductory example

**Info:** this guide gives you an overview of the typical optimization workflow with **mrMBO**. For a much more
detailed introduction see [the next chapter](in_depth_introduction.md).

Here we provide a quickstart example for you to make yourself familiar with **mlrMBO**. We aim to optimize the one dimensional Rastrigin function using model-based optimization. Instead of writing this function by hand, we make use of the smoof package, which offers a lot of common single objective optimization functions.

```{r}
library(smoof)
library(mlr)
library(mlrMBO)
library(ParamHelpers)
obj.fun = makeRastriginFunction(1)
```

**Note:** Since all this stuff here is still under developement it might be neccessary to install the github developement version of the ParamHelpers package via the `devtools::install_github` function.

We decide to use kriging as our surrogate model and to do 10 sequential optimization steps. Furthermore we use Expected Improvement (EI) as the infill criterion, i. e., the criterion which determines which point(s) of the objective function should be evaluated in each iterations (keep in mind, that using EI as the infill criterion needs the learner to support standard error estimation). 

As a last step we have to generate an initial design on which we evaluate our model in the beginning. We use `ParamHelpers::generateDesign` to generate 10 points in a latin hypercube design.

```{r}
learner = makeLearner("regr.km", predict.type = "se", covtype = "matern3_2")
control = makeMBOControl()
control = setMBOControlTermination(control, iters = 10)
control = setMBOControlInfill(control, crit = "ei")
design = generateDesign(n = 10, par.set = smoof::getParamSet(obj.fun))
```

Finally we start the optimization process and print the result object.

```{r}
result = mbo(obj.fun, design = design, learner = learner, control = control, 
             show.info = TRUE)
print(result)
```

# Example run

There is also the function `exampleRun`, which is useful to figure out how `mbo` works and to visualize the results.

```{r, results="hide"}
ex = exampleRun(obj.fun, control = control, show.info = FALSE)
```
```{r}
print(ex)
plotExampleRun(ex)
```

Or alternatively for a two dimensional function:

```{r, results="hide"}
obj.fun2 = makeRastriginFunction(2L)
design2 = generateDesign(n = 10, par.set = smoof::getParamSet(obj.fun2))
ex2 = exampleRun(obj.fun2, control = control, show.info = FALSE)
```
```{r}
print(ex2)
plotExampleRun(ex2)
```






